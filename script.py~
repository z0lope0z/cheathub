from HTMLParser import HTMLParser

import os
import urllib
import re
import pdb #pdb.set_trace()
from bs4 import BeautifulSoup

response = urllib.urlopen('http://code.google.com/p/aima-python/')
soup = BeautifulSoup(response.read())
code_block = soup.find_all(href=re.compile(".py$"))

urls = {}
for a in code_block:
    print "Found the URL:", a['href']
    link = a['href']
    match = re.search(r'((\w*).py$)', link)
    file_title = match.group(2)
    urls[file_title] = link

for key in urls:
    file = urllib.urlretrieve(urls[key])
    os.system('mkdir files/%s' % (key))
    os.system('wget --directory-prefix=files/%s %s' % (key, urls[key]))
    break

def init_git():
    os.system('git init files/')
